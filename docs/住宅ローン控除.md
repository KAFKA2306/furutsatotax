# 住宅ローン控除（概要）

一定の要件を満たす住宅取得・増改築等の借入残高に対して、年末残高の所定割合を所得税（および一部住民税）から控除できる制度です。年度の制度改正や省エネ基準適合の要件等に注意が必要です。

## ポイント（一般的な概要）
- 入居時期・住宅性能・借入残高等により控除率・控除期間・上限が異なる
- 所得税から控除しきれない場合、住民税から一部控除される枠あり
- 適用要件（床面積・合計所得金額・新築/中古区分 等）は年度ごとに確認

本ツールは住宅ローン控除の詳細計算に未対応です（簡易モデル）。

関連: [所得税の基本](所得税の基本.md) / [住民税の基本](住民税の基本.md)

## 計算根拠
- 所得税の税額控除額（その年）: `控除額 = min(年末借入残高 × 控除率, 年ごとの上限額)` を所定の控除期間内で適用
- 控除率・上限額・控除期間は入居時期・住宅性能（省エネ等）・制度改正により異なる
- 所得税で控除しきれない場合、住民税から一部控除される枠がある（年度・制度により上限の定めあり）

## 可視化（控除額と年末借入残高の関係・例）
例として、「控除率0.7%、その年の上限21万円（年末残高3,000万円で到達）」のケースを可視化します。横軸は年末借入残高（万円）、縦軸はその年の控除額（万円）。

<svg viewBox="0 0 640 320" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="住宅ローン控除: 控除額と年末残高の関係（例）">
  <desc>控除額は年末借入残高の0.7%で増加し、上限21万円で頭打ち（例）。</desc>
  <!-- 軸設定: x 0〜4000万円, y 0〜30万円 -->
  <rect x="0" y="0" width="640" height="320" fill="#fff" />
  <line x1="50" y1="260" x2="590" y2="260" stroke="#333" />
  <line x1="50" y1="20" x2="50" y2="260" stroke="#333" />
  <g fill="#333" font-size="10">
    <!-- x ticks: 0,1000,2000,3000,4000 -->
    <g>
      <line x1="50" y1="260" x2="50" y2="265" stroke="#333" />
      <text x="50" y="278" text-anchor="middle">0</text>
      <line x1="170" y1="260" x2="170" y2="265" stroke="#999" />
      <text x="170" y="278" text-anchor="middle">1000</text>
      <line x1="290" y1="260" x2="290" y2="265" stroke="#999" />
      <text x="290" y="278" text-anchor="middle">2000</text>
      <line x1="410" y1="260" x2="410" y2="265" stroke="#999" />
      <text x="410" y="278" text-anchor="middle">3000</text>
      <line x1="530" y1="260" x2="530" y2="265" stroke="#333" />
      <text x="530" y="278" text-anchor="middle">4000</text>
      <text x="590" y="294" text-anchor="end">年末借入残高（万円）</text>
    </g>
    <!-- y ticks: 0,5,10,15,20,25,30 -->
    <g>
      <line x1="50" y1="260" x2="45" y2="260" stroke="#333" />
      <text x="38" y="264" text-anchor="end">0</text>
      <line x1="50" y1="220" x2="45" y2="220" stroke="#999" />
      <text x="38" y="224" text-anchor="end">5</text>
      <line x1="50" y1="180" x2="45" y2="180" stroke="#999" />
      <text x="38" y="184" text-anchor="end">10</text>
      <line x1="50" y1="140" x2="45" y2="140" stroke="#999" />
      <text x="38" y="144" text-anchor="end">15</text>
      <line x1="50" y1="100" x2="45" y2="100" stroke="#999" />
      <text x="38" y="104" text-anchor="end">20</text>
      <line x1="50" y1="60" x2="45" y2="60" stroke="#999" />
      <text x="38" y="64" text-anchor="end">25</text>
      <line x1="50" y1="20" x2="45" y2="20" stroke="#333" />
      <text x="38" y="24" text-anchor="end">30</text>
      <text x="12" y="20" text-anchor="start" transform="rotate(-90 12,20)">控除額（万円/年）</text>
    </g>
  </g>
  <!-- 折れ線: (0,0)〜(3000,21) 以後水平 -->
  <polyline fill="none" stroke="#1f77b4" stroke-width="2" points="50,260 455,92 590,92" />
  <!-- 補助線: 上限到達（3000万円） -->
  <line x1="455" y1="260" x2="455" y2="20" stroke="#999" stroke-dasharray="4,4" />
  <text x="460" y="36" fill="#666" font-size="10">上限到達（21万円）</text>
  <text x="50" y="300" font-size="11" fill="#555">注: 実際の上限・控除率・期間は入居時期や住宅性能で異なります。</text>
</svg>

## 計算例（概念図）
前提（仮定例）
- 年末借入残高: 3,000万円
- 控除率: 0.7%
- その年の所得税額: 25万円

計算
- 住宅ローン控除額（算式上限）= 30,000,000 × 0.7% = 210,000円
- 所得税からの控除 = min(210,000円, その年の所得税額25万円) = 210,000円
- 所得税で控除しきれない額 = 0円（→ この例では住民税での控除は発生しない）

補足
- 所得税で控除しきれない場合に住民税から控除できる額は、年度・住宅区分ごとの上限の範囲内で適用される（詳細は最新の公的資料を参照）
