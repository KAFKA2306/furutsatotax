# 日本の税制・ふるさと納税計算ツール

**🌐 すぐに試す**: https://kafka2306.github.io/furutsatotax/

日本の税制（所得税・住民税）とふるさと納税の上限額を1分で計算できるツールです。給与・副業・投資差益・各種控除を入力するだけで、リアルタイムで税額とふるさと納税限度額を計算。iDeCo・企業型DC・小規模企業共済などの節税効果も即座に確認できます。

**特徴**: 個人情報不要 | ブラウザ完結 | CLI対応 | 再現性のあるYAML入力

## 📊 何ができるか

### ふるさと納税計算
- **限度額の即算出**: 年収・副業・投資収入から瞬時に計算
- **節税効果の可視化**: iDeCo・企業型DC・小規模企業共済の効果を比較
- **条件変更の影響**: 配偶者控除や各制度のオン/オフで限度額の変化を確認

### 税制の理解と学習
- **所得税・住民税の計算過程**: 課税所得から税額まで段階的に表示
- **制度の詳細解説**: 各控除・制度の法的根拠と計算方法を文書化
- **実例データ**: 年収別・家族構成別のサンプルデータを多数収録

## 🚀 使い方

### Web版（推奨）
1. **[ツールを開く](https://kafka2306.github.io/furutsatotax/)** 
2. **年分を選択**（2025年分など）
3. **収入を入力**（給与・副業・投資収入）
4. **控除を入力**（社会保険料・iDeCo・企業型DCなど）
5. **結果を確認**：画面中央に限度額と税額計算が表示

### CLI版（詳細計算・自動化）
```bash
# 必要な依存関係をインストール
pip install pyyaml

# サンプル設定ファイルを作成
cat > example.yml << EOF
salary_income: 7000000     # 年収700万円
side_income: 300000        # 副業収入30万円
expense_rate: 0.3          # 副業経費率30%
capital_gains: 100000      # 投資差益10万円
social_insurance: 900000   # 社会保険料90万円
dc_matching: 240000        # 企業型DCマッチング24万円
ideco: 276000             # iDeCo拠出27.6万円
small_business: 0         # 小規模企業共済0円
tax_year: 2025           # 計算年度
EOF

# 計算実行
python scripts/calc_furusato.py example.yml
```

### 出力例
```
=== 2025年 ふるさと納税限度額計算結果 ===
Total income (aggregate): ¥5,400,000
Taxable income (income tax): ¥3,364,000  
Taxable income (resident tax): ¥3,564,000
Income tax: ¥245,300
Resident tax (income portion): ¥356,400
Approximate donation limit: ¥120,300
```

## 💡 このツールの価値

### 学習・理解のために
- **税制の仕組みが見える**: 課税所得→税額→限度額の計算過程を段階的に表示
- **節税効果が数値で分かる**: iDeCoや企業型DCがどのくらい税額を下げるかを確認
- **法的根拠も学べる**: 各制度の詳細解説と公式資料へのリンクを完備

### 実用性の高さ
- **1分で結果**: 複雑な税務計算を簡単入力で即時実行
- **比較が簡単**: 制度のオン/オフで限度額変化を瞬時に確認
- **データ保存**: YAML形式で設定保存、来年の比較や共有も簡単

### 対象ユーザー
- **ふるさと納税初心者**: 「いくらまで寄付できるか」を素早く把握したい
- **節税制度検討中**: iDeCo・企業型DC・小規模企業共済の効果を数値で確認したい
- **副業・投資家**: 複数収入源でも正確な限度額を計算したい
- **税制学習者**: 所得税・住民税の計算ロジックを実際に動かして理解したい

## 📚 詳細情報・学習リソース

### 計算ロジック
```
1. 給与所得 = 給与収入 - 給与所得控除（年収に応じた控除額）
2. 合計所得 = 給与所得 + 副業収入×(1-経費率) + 投資差益
3. 課税所得 = 合計所得 - 各種所得控除（社会保険料、基礎控除等）
4. 所得税 = 課税所得 × 税率（5%〜45%の累進）
5. 住民税 = 課税所得 × 10%（所得割）
6. ふるさと納税限度額 = (所得税 + 住民税所得割) × 20%
```

### ドキュメント
- **[制度解説トップ](docs/index.md)**: 税制全体の理解
- **私的年金制度**: [企業型DC](docs/DCマッチング拠出.md) | [iDeCo](docs/個人型確定拠出年金_iDeCo.md) | [小規模企業共済](docs/小規模企業共済.md)
- **所得控除**: [基礎控除](docs/基礎控除.md) | [社会保険料控除](docs/社会保険料控除.md) | [配偶者控除](docs/配偶者控除_扶養控除.md)
- **税額控除**: [住宅ローン控除](docs/住宅ローン控除.md) | [ふるさと納税](docs/寄附金控除_ふるさと納税.md)

### 豊富なサンプルデータ
- [単身・年収300万円](web/data/単身_給与300万円_2025.yml)
- [配偶者控除・年収400万円+副業50万円](web/data/配偶者控除_給与400万円_副業50万円_2025.yml)  
- [投資収入・年収550万円+iDeCo+小規模共済](web/data/投資差益あり_給与550万円_iDeCo_小規模共済_2025.yml)
- [高年収・年収800万円+副業120万円+節税対策](web/data/給与800万円_副業120万円_節税対策_2025.yml)

## ⚠️ 重要な注意点

### 計算の精度について
本ツールは学習・概算を目的とした**簡易計算**です。以下を省略・簡略化しています：

- 復興特別所得税（2.1%）
- 住民税の均等割・調整控除
- 住宅ローン控除、医療費控除
- 配偶者（特別）控除、扶養控除
- 分離課税（株式譲渡等）の詳細処理
- 損益通算の複雑なケース

**正確な税額計算や実際の手続きには、税理士や税務署にご相談ください。**

## 🔧 開発・カスタマイズ

### プロジェクト構成
```
├── scripts/          # CLI計算スクリプト
│   ├── calc_furusato.py    # メイン計算ロジック
│   └── normalize_data.py   # データ正規化ツール
├── web/              # Web版UI
│   ├── index.html          # メインページ
│   ├── app.js             # フロントエンド JavaScript
│   └── data/              # サンプルデータ
├── docs/             # 制度解説ドキュメント
└── mkdocs.yml        # ドキュメントサイト設定
```

### ローカル開発
```bash
# ドキュメントサイトをローカルでプレビュー
pip install mkdocs
mkdocs serve

# Web版をローカルで確認（HTTPサーバーが必要）
python -m http.server 8000
# → http://localhost:8000/web/ でアクセス
```

### 貢献・フィードバック
- **⭐ GitHubスター**: 役立ったら応援をお願いします
- **🐛 不具合報告・改善提案**: [Issues](../../issues)で気軽にどうぞ
- **🔧 Pull Request**: 新機能や修正は大歓迎です

---

**免責事項**: 本ツールは教育・学習目的の簡易計算です。実際の税額計算や納税判断には必ず公式情報をご確認ください。
