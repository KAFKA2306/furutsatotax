# ふるさと納税 上限目安を1分で把握するツール

いますぐ試す（Web版）: https://kafka2306.github.io/furutsatotax/

給与・副業・投資差益・各種控除のカンタン入力だけで、「今年のふるさと納税の上限目安」を即表示。iDeCo・DCマッチング・小規模企業共済・配偶者控除の有無などを切り替え、上限がどう動くかを直感的に比較できます。CLIでも同じロジックで再現・自動化できます。

— 個人情報不要 / ブラウザ完結 / 再現性のあるYAML入力 —

## できること（1分で）
- 上限目安を即算出: 年分を選び、収入と控除を入れるだけ。
- 条件比較が一目で分かる: 各制度オン/オフや配偶者の有無を切替。
- 裏付けを確認: 計算根拠や前提はドキュメントとコードで明示。
- 再現・共有が簡単: 入力はYAMLで保存し、来年も同条件で再計算。

## はじめかた

Web（最短）
1. 上のリンクを開く
2. 年分を選ぶ（例: 2025）
3. 収入（給与/副業/投資）と控除（社会保険・iDeCo等）を入力
4. 画面中央に「年間限度額」と計算過程が表示されます

CLI（自分の手元で再現・自動化）
1. Python 3 があればOK（依存: PyYAML）
   ```bash
   pip install pyyaml
   ```
2. 最小の入力例を `example.yml` として保存
   ```yaml
   salary_income: 7000000
   side_income: 300000
   expense_rate: 0.3
   capital_gains: 100000
   social_insurance: 900000
   dc_matching: 240000
   ideco: 276000
   small_business: 0
   tax_year: 2025
   ```
3. 実行
   ```bash
   python scripts/calc_furusato.py example.yml
   ```

出力に含まれる主な項目
- Total income (aggregate): 給与所得控除後給与＋副業（経費控除後）＋投資差益
- Taxable income (income/resident): 所得控除適用後の各税目の課税所得
- Approximate donation limit: 本ツールの簡易式で推定した上限目安（金額は切り下げ処理）

## なぜ便利か（使う理由）
- 迷わないUI: 必要最低限の入力で、すぐ「いくらまでOK」がわかる。
- 比較の速さ: 条件を切り替えると上限や税額の差が即時反映。
- 根拠の透明性: 法的根拠や簡易化の前提を明記（ドキュメント/コードにリンク）。
- データを残せる: YAMLで再現可能。家計の見直し・翌年の比較に最適。

## どんな人に向いているか
- 今年の上限目安を素早く把握したい初学者
- 副業・投資・配偶者控除の有無による変化を比較したい人
- iDeCo/小規模企業共済/DCマッチングの“効き方”をざっくり掴みたい人
- コードや数式の前提も確認しながら、安全にオフライン試算したい人

## 共有しやすいポイント（拡散のために）
- 「1分で上限目安がわかる」— 家族・同僚にも勧めやすいシンプルさ
- WebでもCLIでも同じ結果— 再現性が高く、情報発信しやすい
- 入力テンプレのコピペで再現— ブログやSNSに貼るだけで説明可能

## 仕組み（ざっくり）
- 合計所得金額（本ツール定義）= `給与所得控除後の給与 + 副業×(1-経費率) + 投資差益`
- 課税所得（所得税/住民税）= `合計所得金額 − (社会保険料等の所得控除) − 基礎控除`
- 税額: 所得税は速算表（5%〜45%）、住民税は所得割10%のみで概算
- 上限目安: `(所得税額 + 住民税(所得割)) × 20%` を一定単位で切り下げ

制度の詳しい解説や法的根拠は `docs/`（トップ: `docs/index.md`）を参照。

## 精度・注意点（大事）
- 本ツールは「簡易推計」です。復興特別所得税、住民税の均等割・調整控除、住宅ローン控除、医療費控除、配当控除、配偶者（特別）控除、扶養控除 等の多くを省略・簡略化しています。
- 分離課税（株式・投資等）や損益通算の扱いは実務と異なる場合があります。
- 厳密な金額が必要な場合は、各自治体・国税庁等の公式情報や専門家にご確認ください。

## よくある質問
- 年分の切替は？: Webは年分セレクタ、CLIはYAMLの `tax_year` または `--tax-year` で設定可能。
- 入力は難しい？: サンプルをコピペして数字を置き換えるだけ。最小限の項目で動きます。
- オフラインで動く？: CLIは完全オフライン。WebはローカルHTMLでも動作し、入力は端末内で完結します。

## もっと使いこなす
- 代表的な入力パターンは Web のプルダウンから即読込可（例: 単身/副業あり/投資差益あり 等）。
- 画面下部のグラフで、制度適用前後の税額・節税効果・限度額の比較を可視化。
- CLIはスクリプト化して家族分やケース比較を一括計算できます（`scripts/calc_furusato.py`）。

## ドキュメント・開発向け
- 制度解説: `docs/` 配下（例: `docs/DC制度解説.md`, `docs/寄附金控除_ふるさと納税.md`）
- Web版: `web/index.html` と `web/app.js`
- 設定サイト生成: `mkdocs.yml`（ローカルプレビューは `mkdocs serve`）

## 応援・貢献
- 役に立ったらGitHubスターで応援してもらえると嬉しいです！
- 改善アイデア/不具合報告はIssueで気軽にどうぞ。PRも歓迎です。

---

注意: 本ツールは学習・家計見直しの支援を目的とした簡易推計です。実際の税額や上限は個別事情により異なります。最終判断は公式情報・専門家にご相談ください。
